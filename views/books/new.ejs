<% layout("layouts/boilerplate") %>
<div class="row mt-3">
  <div class="col-8 offset-3">
    <h3>ðŸ“š Add a New Book</h3>

    <form method="POST" action="/books" novalidate class="needs-validation">
      <!-- Title -->
      <div class="mb-3">
        <label for="title" class="form-label">Book Title</label>
        <input
          name="book[title]"
          placeholder="Enter book title"
          type="text"
          class="form-control"
          required
        />
        <div class="valid-feedback">Title looks good!</div>
        <div class="invalid-feedback">Please enter a valid title</div>
      </div>

      <!-- ISBN -->
      <div class="mb-3">
        <label for="isbn" class="form-label">ISBN</label>
        <input
          name="book[isbn]"
          placeholder="e.g. 978-3-16-148410-0"
          type="text"
          class="form-control"
          required
        />
        <div class="invalid-feedback">Please enter a valid ISBN</div>
      </div>

      <!-- Author -->
      <div class="mb-3">
        <label for="author" class="form-label">Author</label>
        <select name="book[author_id]" class="form-select" required>
          <option value="" selected disabled>Select an author</option>
          <% authors.forEach(author => { %>
          <option value="<%= author.author_id %>"><%= author.name %></option>
          <% }) %>
        </select>
        <div class="invalid-feedback">Please select an author</div>
      </div>

      <!-- Publisher -->
      <div class="mb-3">
        <label for="publisher" class="form-label">Publisher</label>
        <select name="book[publisher_name]" class="form-select" required>
          <option value="" selected disabled>Select a publisher</option>
          <% publishers.forEach(publisher => { %>
          <option value="<%= publisher.name %>"><%= publisher.name %></option>
          <% }) %>
        </select>
        <div class="invalid-feedback">Please select a publisher</div>
      </div>

      <!-- Publication Year -->
      <div class="mb-3 col-md-6">
        <label for="year" class="form-label">Publication Year</label>
        <input
          name="book[publication_year]"
          placeholder="2024"
          type="number"
          class="form-control"
          min="1500"
          max="2025"
          required
        />
        <div class="invalid-feedback">Enter a valid year</div>
      </div>

      <!-- Price -->
      <div class="mb-3 col-md-6">
        <label for="price" class="form-label">Price</label>
        <input
          name="book[price]"
          placeholder="499"
          type="number"
          class="form-control"
          step="0.01"
          required
        />
        <div class="invalid-feedback">Enter a valid price</div>
      </div>

      <button class="btn btn-dark add-btn mt-3 mb-3">Add Book</button>
    </form>
  </div>
</div>
